# Maintainer: StoneCold <forumi0721[at]gmail[dot]com>

pkgname=tvheadend
pkgver=3.5.248
pkgrel=1
pkgdesc="TV streaming server for Linux"
arch=("arm" "armv6h" "armv7h" "i686" "x86_64")
url="https://tvheadend.org/"
license=("GPL3")
depends=("avahi" "openssl" "python2")
makedepends=("git")
optdepends=("xmltv: For an alternative source of programme listings")
provides=("tvheadend")
conflicts=("tvheadend" "hts-tvheadend" "hts-tvheadend-svn")
install=tvheadend.install

source=("${pkgname}-${pkgver}.zip::https://github.com/tvheadend/tvheadend/archive/819627ecc7db69537134ff01e946992a9ff631ca.zip"
  "tvheadend.service")

md5sums=("SKIP"
  "b546f4486f0d28bea13ad1fb676acb27")

build() {
  msg "Starting make..."
  cd "${srcdir}"/tvheadend-819627ecc7db69537134ff01e946992a9ff631ca
  ./configure --prefix=/usr --mandir=/usr/share/man/man1 --python=python2 --release
  make
}

package() {
  cd "${srcdir}"/tvheadend-819627ecc7db69537134ff01e946992a9ff631ca
  make DESTDIR="${pkgdir}"/ install
  install -D -m 644 "${srcdir}"/tvheadend.service "${pkgdir}"/usr/lib/systemd/system/tvheadend.service
}

# vim:set ts=2 sw=2 et:
