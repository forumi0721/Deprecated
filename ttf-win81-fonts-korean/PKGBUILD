# Maintainer: StoneCold <forumi0721[at]gmail[dot]com>

pkgname=("ttf-win81-fonts-korean")
pkgver=20150206.1
pkgrel=1
pkgdesc="Windows 8.1 korean fonts"
arch=("any")
url="http://www.microsoft.com"
license=("custom")
depends=("fontconfig" "xorg-fonts-encodings" "xorg-font-utils")
conflicts=("ttf-win71-fonts-cjk" "ttf-win71-fonts")
provides=("ttf-font")
install="${pkgname}.install"
source=("http://forumi0721.ipdisk.co.kr:8000/arch/distfiles/${pkgname}.zip")
md5sums=("42607dc7c20d62ffeda044104c191c9e")

pkgver() {
  local ldate="$(date +'%Y%m%d')"
  local lrevision=0
  local lrevision2=0
  local larch=${arch}
  if [ "${larch}" != "any" ]; then
    larch="${CARCH}"
  fi
  for file in $(ls "${startdir}"/${pkgname}-${ldate}.*-${pkgrel}-${larch}.pkg.* 2> /dev/null)
  do
    lrevision2="$(echo $(basename "${file}") | sed -e "s/${pkgname}-${ldate}.//g" -e "s/-${pkgrel}-${larch}.pkg\..*//g" 2> /dev/null)"
    if [ "${lrevision2}" > 0 ] && [ "${lrevision}" -lt "${lrevision2}" ]; then
      lrevision=${lrevision2}
    fi
  done
  lrevision=$(($lrevision + 1))
  echo "${ldate}.${lrevision}"
}

package() {
	install -dm0755 "${pkgdir}"/usr/share/fonts/TTF
	install -Dm0644 "${srcdir}"/*.ttf "${pkgdir}"/usr/share/fonts/TTF/
	install -Dm0644 "${srcdir}"/*.ttc "${pkgdir}"/usr/share/fonts/TTF/
}

# vim:set ts=2 sw=2 et:
