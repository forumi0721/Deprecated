# Maintainer: StoneCold <forumi0721[at]gmail[dot]com>

pkgname=("libvdpau-sunxi-git")
pkgver=49+ge4e3ef3
pkgrel=1
pkgdesc="Experimental VDPAU for Allwinner sunxi SoCs (WiP)"
arch=("armv7h")
url="https://github.com/LeMaker/libvdpau-sunxi/"
license=("GPL")
makedepends=("git")
provides=("libvdpau-sunxi")
conflicts=("libvdpau-sunxi")
source=("${pkgname}::git+https://github.com/LeMaker/libvdpau-sunxi.git"
  "vdpau.sh")
md5sums=("SKIP"
  "SKIP")

pkgver() {
  cd "${pkgname}"
  echo $(git rev-list --count HEAD)+g$(git rev-parse --short HEAD)
}

build() {
	cd "${pkgname}"
	make
}

package() {
  cd "${pkgname}"
  make DESTDIR="${pkgdir}" install

  cd "${pkgdir}"/usr/lib/vdpau
  ln -s libvdpau_sunxi.so.1 libvdpau_sunxi.so

  install -dm755 "${pkgdir}"/etc/profile.d
  install -Dm755 "${srcdir}"/vdpau.sh "${pkgdir}"/etc/profile.d/
}

# vim:set ts=2 sw=2 et:
